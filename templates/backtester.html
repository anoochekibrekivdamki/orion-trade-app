{% extends "base.html" %}

{% block content %}
<div class="column is-8 is-offset-2">

    <!-- HEADER -->
    <div class="box has-text-centered">
        <h1 class="title" style="color:black">
            Backtester
        </h1>
        <p class="subtitle" style="color:black">
            SMA strategy simulation
        </p>
    </div>

    <!-- CHART -->
    <div class="box">
        <div id="chart" style="width:100%; height:420px;"></div>

        <!-- CONTROLS + METRICS -->
        <div class="box mt-4">
            <div class="columns is-vcentered is-variable is-2">

                <!-- Play / Pause / Reset -->
                <div class="column is-narrow">
                    <button id="playButton" class="button is-success">▶ Play</button>
                </div>
                <div class="column is-narrow">
                    <button id="pauseButton" class="button is-info">⏸ Pause</button>
                </div>
                <div class="column is-narrow">
                    <button id="resetButton" class="button is-warning">⟳ Reset</button>
                </div>

                <!-- Step Back / Step Forward -->
                <div class="column is-narrow">
                    <button id="prevButton" class="button is-light">← Candle</button>
                </div>
                <div class="column is-narrow">
                    <button id="nextButton" class="button is-light">Candle →</button>
                </div>

                <!-- Metrics -->
                <div class="column">
                    <div id="metrics" class="content">
                        <p><strong>Balance:</strong> –</p>
                        <p><strong>Trades:</strong> –</p>
                        <p><strong>Win rate:</strong> –</p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Lightweight Charts -->
<script src="https://unpkg.com/lightweight-charts@5/dist/lightweight-charts.standalone.production.js"></script>

<!-- Backtest logic -->
<script type="module" src="{{ url_for('static', path='js/bt_chart.js') }}"></script>

{% endblock %}
